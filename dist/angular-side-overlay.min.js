/**
 * angular-side-overlay - angular side overlay component
 * @author taobataoma
 * @version v1.1.0
 * @link https://github.com/taobataoma/angular-side-overlay#readme
 * @license MIT
 */
function sideOverlay(e){function n(n,a,i){function s(n){var a=null;return angular.forEach(e,function(e){e.id===n&&(a=e)}),a}function t(n){s(n)||e.push({id:n,isOpened:!1,position:"right",openCallback:null,closeCallback:null})}a.addClass("side-overlay"),t(a.attr("id"));var l=s(a.attr("id")),o="side-visible-right",d="side-class-default-right";n.$watch(i.sideOverlay,function(e){function s(e){var n=1.01*a.prop("clientWidth"),i=1.01*a.prop("clientHeight");switch(l.position){case"left":a.css("top","0"),a.css("bottom","0"),a.css("left","-"+n+"px");break;case"right":a.css("top","0"),a.css("bottom","0"),a.css("right","-"+n+"px");break;case"top":a.css("left","0"),a.css("right","0"),a.css("top","-"+i+"px");break;case"bottom":a.css("left","0"),a.css("right","0"),a.css("bottom","-"+i+"px");break;default:a.css("top","0"),a.css("bottom","0"),a.css("right","-"+n+"px")}}l.position=i.sideOverlay,o="side-visible-"+l.position,d="side-class-default-"+l.position,n.$watch(i.sideClass,function(e){i.sideClass?a.addClass(i.sideClass):a.addClass(d),s()})}),n.$watch(i.sideModal,function(e){if(i.hasOwnProperty("sideModal")){var n="sideBackground_"+a.attr("id"),s=angular.element('<div id="'+n+'" class="side-background" style="display: none;"></div>');angular.element(document.getElementsByTagName("body")).append(s)}}),n.$watch(i.sideCloseOnOutsideClick,function(e){i.hasOwnProperty("sideCloseOnOutsideClick")&&$(document.body).on("click",function(e){a.hasClass(o)&&a.removeClass(o)})}),n.$watch(i.sideCloseOnEsc,function(e){i.hasOwnProperty("sideCloseOnEsc")&&$(document).on("keydown",function(e){27===e.keyCode&&a.hasClass(o)&&a.removeClass(o)})}),a.bind("click",function(e){e.stopPropagation()}),a.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(e){var s=$("#sideBackground_"+a.attr("id"));l&&e.target.id===l.id&&(a.hasClass(o)?(l.isOpened=!0,"function"==typeof l.openCallback&&n.$apply(function(){l.openCallback()}),n.$apply(function(){n.$eval(i.sideOpened)})):(s&&s.css("display","none"),l.isOpened=!1,"function"==typeof l.closeCallback&&n.$apply(function(){l.closeCallback()}),n.$apply(function(){n.$eval(i.sideClosed)})))})}var a={restrict:"A",link:n};return a}angular.module("ngSideOverlay",[]),angular.module("ngSideOverlay").constant("MODULE_VERSION","1.1.0"),angular.module("ngSideOverlay").value("sideCallbackEvent",[{id:void 0,isOpened:!1,openCallback:void 0,closeCallback:void 0,position:"right"}]),angular.module("ngSideOverlay").provider("SideOverlay",function(){this.$get=["sideCallbackEvent",function(e){function n(n){var a=null;return angular.forEach(e,function(e){e.id===n&&(a=e)}),a}var a=function(e,a,i){if(a){var s=n(a);if(s){s.isOpened=!0,s.openCallback=i,s.closeCallback=null;var t=angular.element(document.getElementById(a)),l="side-visible-"+s.position;t.hasClass(l)||t.addClass(l);var o=$("#sideBackground_"+a);o&&o.css("display","block"),e&&"undefined"!=typeof e.altKey&&e.stopPropagation()}}},i=function(e,a,i){if(a){var s=n(a);if(s){s.isOpened=!1,s.openCallback=null,s.closeCallback=i;var t=angular.element(document.getElementById(a)),l="side-visible-"+s.position;t.hasClass(l)&&t.removeClass(l),e&&"undefined"!=typeof e.altKey&&e.stopPropagation()}}},s=function(n){var a=!1;return angular.forEach(e,function(e){e.id===n&&(a=e.isOpened)}),a};return{isOpened:s,open:a,close:i}}]}),angular.module("ngSideOverlay").directive("sideOverlay",sideOverlay),sideOverlay.$inject=["sideCallbackEvent"];